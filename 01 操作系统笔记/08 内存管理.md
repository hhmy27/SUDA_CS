[toc]

# 08 内存管理

## 测验

![1  0  0  0  选 〈 5 分 ） 在 可 变 分 区 存 储 百 哩 中 ， 六 了 雲 现 王 存 的 窒 间 分 配 ， 应 设 置 0  A. 窒 闲 区 表  B. 贞 表  C. 位 示 图  D. 段 表  礴 幸 ： A 你 选 对 了 ](MdAsset/08 内存管理/clip_image001.png)

页表是分页存储管理的，位示图是表示剩余空间，段表是分段存储管理

![з  о  о  (555)  ВЯ/ВЯ ](MdAsset/08 内存管理/clip_image001-1603975392504.png)

![g 凶 g 囮 •o ○  g 凶 g •o ○ ](MdAsset/08 内存管理/clip_image001-1603975396803.png)

单一连续分配内存中只存在一个进程

![10  0  O  O  里 选 （ 5 分 ） 在 可 变 式 分 区 存 储 菅 理 中 ， 某 作 业 完 成 后 唧 擅 回 其 王 存 窒 间 ， 该 窒 间 可 能 与 相 邻 窒 闱 区 含  # ， 在 改 室 闲 表 时 使 室 闱 数 不 变 且 室 闱 起 始 地 址 不 变 的 情 况 罡 0  A. 无 上 邻 窒 闲 区 但 有 下 邻 宝 闱 区  & 有 上 邻 宝 闲 区 但 无 下 邻 宝 区  C. 有 上 邻 空 禾 区 也 有 下 邻 空 闲 区  无 上 邻 窒 阑 区 也 无 下 邻 窒 阑 区  正 确 答 案 ： B 你 选 对 了 ](MdAsset/08 内存管理/clip_image001-1603975407347.png)

这个要思考一下，起始地址不变+空闲区数不变，起始地址不变表示插入的空闲块不能是第一块之前的，空闲区数不变表示要合并

![11  囗  [ ] （ 5 分 ） 里 个 分 区 的 存 储 菅 理 可 采 用 下 列 技 木 檑 大 存 储 窒 间 的 量 的 呈 0  A. 对 损  & 缓 冲  D. 紧 缩  在 答 ： A 、  C 你 佬 选 为 A ． C. 0 ](MdAsset/08 内存管理/clip_image001-1603975415864.png)

紧缩不是增大，是调整进程在内存中的位置以获得更大的空闲区，交换和覆盖是概念上的增大

![12  囗  [ 0 ] （ 5 分 ） 在 固 定 分 区 存 菅 理 中 ， 力 了 高 王 存 窒 间 的 利 用 辜 ， 可 采 用 （ ） 技 木  A. 分 大 小 的 排 列 顺 划 分 分 区 ， # 按 从 小 到 大 的 顺 存 依 次 记 录 莊 分 区 分 配 表 中  B. 人 作 业 可 以 申 谲 0 个 分 区  C. 按 经 常 出 现 作 业 大 小 来 划 分 分 区  D. 不 同 作 廿 谲 求 队 列 中 的 作 可 以 申 谲 相 同 的 分 区  正 礴 跹 A 、 C 你 镶 选 为 A 、 B 、 c ](MdAsset/08 内存管理/clip_image001-1603975439389.png)

一个作业只能放入一个分区

![image-20201029204407289](MdAsset/08 内存管理/image-20201029204407289.png)

这里的可变分区应该是指动态分区，固定分区有两种方式（分区大小相等，分区大小不等）。只有固定分区存储管理是不会在内存中移动的，所以不需要用到动态重定位

![18 判 断 （ 5 分 ） 冥 现 进 程 数 摆 共 享 最 方 便 的 存 储 管 理 技 尔 是 分 页 ，  O  正 晦 善 案 ： A 你 选 对 了  解 沂 ： 是 分 段 ](MdAsset/08 内存管理/clip_image001-1603975453511.png)

这个王道视频里面讲过，分页的话不好有可能某一页的一半数据是可共享的，另一半数据是不可共享的。分段的话一段能共享就是一整段能共享

![14  囗  0 选 气 5 分 ） 存 任 内 碎 片 羽 存 储 管 理 方 式 有 0  A. 页 式 存 储 管 理  B. 单 一 i 卖 分 配  c. 固 定 分 区 分 配  D. 可 变 分 区 分 配  止 晦 答 案 ： A 、 B 、 C 你 选 对 了  囗  囗  到  0 （ 5 分 ） 存 在 醉 片 的 存 储 管 理 万 式 有 0  A. 页 式 存 储 管 理  巳 段 式 存 赭 管 理  c. 没 页 式 存 赭 管 理  D. 可 变 分 区 分 配  正 晦 案 ： B 、 D 你 选 对 了 ](MdAsset/08 内存管理/clip_image001-1603975462902.png)

与我之间整理的表格一致

![连 续 分 配  内 碎 片  外 碎 片  单 一 连 续 分 配  有 有 无 片  无  固 定 分 区 分 配  无  动 态 内 存 分 配  有  非 连 续 分 配  碎 有 无 有  外 碎 片  分 页 式  无 有 无  分 段 式  段 页 式 ](MdAsset/08 内存管理/clip_image001-1603975477854.png)

![20 判 断 （ 5 分 ） 在 贞 式 存 储 管 理 中 ， 引 入 快 表 可 以 凌 少 莓 一 次 的 内 存 访 「 山 祉  O  确 答 案 ： B 你 选 对 了  解 忻 ： 引 入 快 表 只 减 少 平 均 的 内 存 访 回 刊 闾 ， 而 不 是 甾 次 内 存 访 回 刊 闾 · ](MdAsset/08 内存管理/clip_image001-1603975482984.png)

看清楚解析

## 作业

![image-20201029204520298](MdAsset/08 内存管理/image-20201029204520298.png)

**答案：**

重定位:装入时对目标程序中指令和数据从逻辑地址转换为物理地址的修改过程。

重定位种类:静态重定位，动态重定位。

静态重定位:地址变换通常在装入时一次完成。

动态重定位:在程序运行之前只装入他的部分代码立刻投入运行，然后在程序运行期间，根据需要动态申请分配内存。

---

![image-20201029204534067](MdAsset/08 内存管理/image-20201029204534067.png)

16位，4KB=2^12B，12位，表示余下4位是页号，那这个就简单了，写出二进制之后只用转换前四位就行了

2F6AH=0010 1111 0110 1010，第二页，对应物理块11，转换结果为

 =1011 1111 0110 1010=BF6AH

0E3CH=0000 1110 0011 1100 第0页对应第5块，转换结果为

=0101 1110 0011 1100=5E3CH

526CH=0101 0010 0110 1100 第五页不存在，发生缺页

![OW ](MdAsset/08 内存管理/clip_image001-1603975544831.png)

---

![3  (3055)  219  14  100  1327  1952  a. O, 430  b. 1,10  c. 2, 500  d. 3,400  e. 4,122 ](MdAsset/08 内存管理/clip_image001-1603975550724.png)

**答案：**

逻辑转物理

1. 0号段对应219+430=649
2. 1号段对应2300+10
3. 2号段长度只有100，但是偏移量500>100，发生错误
4. 3号段1327+4000=1727
5. 4号段同c发生错误

![0 ](MdAsset/08 内存管理/clip_image001-1603975571062.png)

---

![4  （ 20 分 ）  某 条 统 采 用 可 变 分 区 方 式 管 理 王 存 储 器 ， 在 王 存 分 配 情 况 如 图 所 示 时 ， 有 4 个 作 业 要 求 装 少 、 王 存 ，  它 们 各 自 所 需 的 主 存 空 间 为 ： Jl: B ， J2 ： 15K J3 ： 3 J4 ： 115KB ， 系 统 不 允 许 移 动 · 清  回 答 下 列 № ：  （ 1 ） 采 厍 首 次 适 应 分 配 筛 法 分 配 主 存 ， 应 按 怎 样 的 次 序 才 能 将 4 个 作 业 同 时 全 部 装 入 主 存 ？ 写 出  所 有 可 § 装 ， \ 次 序 。  系 统 区  空 闲 区  空 闲 区  JB  空 闲 区 ](MdAsset/08 内存管理/clip_image001-1603975574318.png)

![image-20201111150446923](MdAsset/08 内存管理/image-20201111150446923.png)



---

![5  （ 15 分 ）  一 个 分 贞 存 储 系 统 ， 贞 表 存 放 在 内 存 ：  （ 1 ） 如 果 访 司 一 次 内 存 需 要 2 ns 。 则 访 问 一 个 内 存 单 元 需 要 多 少 时 司 ？  （ 2 ） 如 果 糹 统 采 用 三 级 贞 表 ， 则 访 问 一 个 内 存 单 元 需 要 多 《 寸 间 ？  （ 3 ） 如 果 系 统 引 入 朕 想 寄 存 器 。 ％ 的 页 表 项 可 以 在 快 表 中 命 中 ， 则 访 问 一 一 个 内 存 单 元 需 要 多 少  时 司 ？ （ 假 设 访 问 一 一 次 快 表 需 要 ions) ](MdAsset/08 内存管理/clip_image001-1603975605318.png)

**答案：**

页表在内存中

1. 单级页表，200+200=400ns
2. 三级，前三次得到页的物理地址，第四次根据地址访问内存200+200+200+200=800ns
3. 0.9\*(10+200)+0.1*(10+200+10+200)=231ns

快表命中：10ns访问快表，200ns访问内存

快表未命中：10ns访问快表发现页不在快表中，200ns访问页表发生缺页，调入后访问快表再访问内存

官方答案：

![img](MdAsset/08 内存管理/clip_image001.jpg)

官方答案和上面答案不同的地方在于：

缺页置换完成后，上面的答案直接访问内存，而没有访问快表，所以少了10ns的运行时间

不同的原因请参考第九章第二题的答案

---

![6  （ 15 分 ）  假 定 莫 采 用 分 页 式 存 储 管 理 的 系 统 ， 主 存 容 量 为 1M ， 被 分 成 块 ， 块 号 为 0 ， 1 ， 2 ，  255 · 某 作 业 的 地 址 仝 间 占 4 页 ， 貝 页 号 为 0 ， 1, 2 ， 3 ， 被 分 配 到 王 存 的 第 2 ， 生 1 ， 5 块 中 · 回  答 ：  (1) 王 存 止 应 该 用 多 少 位 来 表 示 ？  （ 2 ） 作 业 岳 一 页 的 长 度 是 多 少 ？ 逻 捐 地 址 中 的 页 内 偏 哆 应 用 多 少 位 菜 轰 示 ？  （ 3 ） 写 出 作 业 中 的 每 一 ． 页 在 王 存 块 中 B 台 地 址 ． ](MdAsset/08 内存管理/clip_image001-1603975644611.png)

![image-20201029204739403](MdAsset/08 内存管理/image-20201029204739403.png)

![山 · b 二 )  4 ](MdAsset/08 内存管理/clip_image001-1603975665171.jpg)

老师贴的答案有误，主存地址是20位

![主 存 地 址  0 定 早 采 总 分 页 过 存 苣 的 苤 ， 主 存 言 是 为 1M ， 脚 」 2 0 。 0 为 0 乙  ” ， 。 作 韭 0 河 挈 页 ． 页 e 丿 」 0 2 ． 3 。 《 分 0 引 主 行 的 酒 乙 生 1 ． 5 焕 中 。 也  〔 1 〕 存 te 》 0 該 少 睾 就 示 ？  〔 2 〕 0 业 的 一 的 长 度 是 少 ？ 逻 地 止 中 的 負 少 0 不 小 ？  〔 3 〕 与 出 作 业 中 的 一 页 过 主 存 中 的 起 学 匕  玄 内 0 」 〕 T } 娌 1 甲 用 怍 虱  一 讠 内 刂 司 确 80 尔 一 卫 梗 内 坌  老 师 适 河 为 啥 这 的 主 存 址 不 杲 20 位 呀 ？  匿 名 发 汞 ID 启 27 凸  共 1 个 回 思  2D0 。 笞 写 错 了 。  李 培 0 ID 启 28 ](MdAsset/08 内存管理/clip_image001-1603975674595.png)

